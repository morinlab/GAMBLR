<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Collate Results — collate_results • GAMBLR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Collate Results — collate_results"><meta property="og:description" content="Bring together all derived sample-level results from many GAMBL pipelines."><meta property="og:image" content="https://github.com/morinlab/GAMBLR/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-12345678-0"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-12345678-0');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">GAMBLR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9500</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-light fa-memo-circle-info"></span>
     
    How To
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="https://morinlab.github.io/GAMBLR/#installation" class="external-link">Install</a>
    </li>
    <li>
      <a href="https://morinlab.github.io/GAMBLR/#running-gamblr-on-your-own-computer" class="external-link">Running GAMBLR On Your Own Computer</a>
    </li>
    <li>
      <a href="https://morinlab.github.io/GAMBLR/#contributing" class="external-link">Contribute</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-light fa-person-chalkboard"></span>
     
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/ssm_tutorial.html">SSM</a>
    </li>
    <li>
      <a href="../articles/cn_sv_tutorial.html">CN &amp; SV</a>
    </li>
    <li>
      <a href="../articles/fancy_plots.html">Fancy Plots</a>
    </li>
    <li>
      <a href="../articles/utilities_tutorial.html">Utilities</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions &amp; Bundled Data
  </a>
</li>
<li>
  <a href="https://github.com/morinlab/GAMBLR">
    <span class="fa fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Collate Results</h1>
    
    <div class="hidden name"><code>collate_results.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Bring together all derived sample-level results from many GAMBL pipelines.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">collate_results</span><span class="op">(</span></span>
<span>  <span class="va">sample_table</span>,</span>
<span>  write_to_file <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  join_with_full_metadata <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">these_samples_metadata</span>,</span>
<span>  <span class="va">case_set</span>,</span>
<span>  sbs_manipulation <span class="op">=</span> <span class="st">""</span>,</span>
<span>  seq_type_filter <span class="op">=</span> <span class="st">"genome"</span>,</span>
<span>  from_cache <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>sample_table</dt>
<dd><p>A data frame with sample_id as the first column.</p></dd>


<dt>write_to_file</dt>
<dd><p>Boolean statement that outputs tsv file (/projects/nhl_meta_analysis_scratch/gambl/results_local/shared/gambl_seq_type_filter_results.tsv) if TRUE, default is FALSE.</p></dd>


<dt>join_with_full_metadata</dt>
<dd><p>Join with all columns of metadata, default is FALSE.</p></dd>


<dt>these_samples_metadata</dt>
<dd><p>Optional argument to use a user specified metadata df, overwrites get_gambl_metadata in join_with_full_metadata.</p></dd>


<dt>case_set</dt>
<dd><p>Optional short name for a pre-defined set of cases.</p></dd>


<dt>sbs_manipulation</dt>
<dd><p>Optional variable for transforming sbs values (e.g log, scale).</p></dd>


<dt>seq_type_filter</dt>
<dd><p>Filtering criteria, default is genomes.</p></dd>


<dt>from_cache</dt>
<dd><p>Boolean variable for using cached results (/projects/nhl_meta_analysis_scratch/gambl/results_local/shared/gambl_seq_type_filter_results.tsv), default is TRUE. If write_to_file is TRUE, this parameter auto-defaults to FALSE.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A table keyed on biopsy_id that contains a bunch of per-sample results from GAMBL</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function takes a data frame with sample IDs (in the first column) with the <code>sample_table</code> parameter and adds sample-level results from many of the available GAMBL pipelines.
Optional parameters are <code>these_samples_metadata</code> and <code>join_with_full_metadata</code>. If <code>join_with_full_metadata</code> is set to TRUE, the function can either work with an already subset metadata
table (<code>these_sampels_metadata</code>), or, if not provided, the function will default to all metadata returned with <code>get_gambl_metadata</code>, allowing the user to extend the available information in a metadata table.
This function has also been designed so that it can get cached results, meaning that not all individual collate helper functions would have to be run to get results back.
To do so, run this function with <code>from_cache = TRUE</code> (default). In addition, it's also possible to regenerate the cached results, this is done by setting <code>write_to_file = TRUE</code>,
This operation auto defaults <code>from_cache = FALSE</code>. <code>case_set</code> is an optional parameter available for subsetting the return to an already defined set of cases.
Lastly, <code>seq_type_filter</code> lets the user control what seq type results will be returned for. Default is "genome". For more information on how to get the most out of this function,
refer to function examples, vignettes and parameter descriptions.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#get collated results for all capture samples, using cached results</span></span></span>
<span class="r-in"><span><span class="va">capture_collated_everything</span> <span class="op">=</span> <span class="fu">collate_results</span><span class="op">(</span>seq_type_filter <span class="op">=</span> <span class="st">"capture"</span>,</span></span>
<span class="r-in"><span>                                              from_cache <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                                              write_to_file <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "missing:  /Users/rmorin/git/gambl/data/metadata/gambl_all_outcomes.tsv"</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Have you cloned the GAMBL repo and added the path to this directory under the local section of your config?</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> '/Users/rmorin/git/gambl/data/metadata/gambl_all_outcomes.tsv' does not exist.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#use an already subset metadata table for getting collated results (cached)</span></span></span>
<span class="r-in"><span><span class="va">my_metadata</span> <span class="op">=</span> <span class="fu"><a href="get_gambl_metadata.html">get_gambl_metadata</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "missing:  /Users/rmorin/git/gambl/data/metadata/gambl_all_outcomes.tsv"</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Have you cloned the GAMBL repo and added the path to this directory under the local section of your config?</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> '/Users/rmorin/git/gambl/data/metadata/gambl_all_outcomes.tsv' does not exist.</span>
<span class="r-in"><span><span class="va">fl_metadata</span> <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">my_metadata</span>, <span class="va">pathology</span> <span class="op">==</span> <span class="st">"FL"</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in dplyr::filter(my_metadata, pathology == "FL"):</span> object 'my_metadata' not found</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fl_collated</span> <span class="op">=</span> <span class="fu">collate_results</span><span class="op">(</span>seq_type_filter <span class="op">=</span> <span class="st">"genome"</span>,</span></span>
<span class="r-in"><span>                              join_with_full_metadata <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                              these_samples_metadata <span class="op">=</span> <span class="va">fl_metadata</span>,</span></span>
<span class="r-in"><span>                              write_to_file <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                              from_cache <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "missing:  /Users/rmorin/git/gambl/data/metadata/gambl_all_outcomes.tsv"</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Have you cloned the GAMBL repo and added the path to this directory under the local section of your config?</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> '/Users/rmorin/git/gambl/data/metadata/gambl_all_outcomes.tsv' does not exist.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#get collated results for all genome samples and join with full metadata</span></span></span>
<span class="r-in"><span><span class="va">everything_collated</span> <span class="op">=</span> <span class="fu">collate_results</span><span class="op">(</span>seq_type_filter <span class="op">=</span> <span class="st">"genome"</span>,</span></span>
<span class="r-in"><span>                                      from_cache <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                                      join_with_full_metadata <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "missing:  /Users/rmorin/git/gambl/data/metadata/gambl_all_outcomes.tsv"</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Have you cloned the GAMBL repo and added the path to this directory under the local section of your config?</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> '/Users/rmorin/git/gambl/data/metadata/gambl_all_outcomes.tsv' does not exist.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#another example demonstrating correct usage of the sample_table parameter.</span></span></span>
<span class="r-in"><span><span class="va">fl_samples</span> <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">fl_metadata</span>, <span class="va">sample_id</span>, <span class="va">patient_id</span>, <span class="va">biopsy_id</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in dplyr::select(fl_metadata, sample_id, patient_id, biopsy_id):</span> object 'fl_metadata' not found</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fl_collated</span> <span class="op">=</span> <span class="fu">collate_results</span><span class="op">(</span>sample_table <span class="op">=</span> <span class="va">fl_samples</span>,</span></span>
<span class="r-in"><span>                              seq_type_filter <span class="op">=</span> <span class="st">"genome"</span>,</span></span>
<span class="r-in"><span>                              from_cache <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> /Users/rmorin/gambl_results/shared/gambl_genome_results.tsv</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "missing:  /Users/rmorin/gambl_results/shared/gambl_genome_results.tsv"</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Cannot find file locally. If working remotely, perhaps you forgot to load your config (see below) or sync your files?</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sys.setenv(R_CONFIG_ACTIVE = "remote")</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> '/Users/rmorin/gambl_results/shared/gambl_genome_results.tsv' does not exist.</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Ryan Morin, Kostia Dreval, Adam Mattsson.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

